!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=0)}([function(e,n,t){"use strict";t.r(n),t.d(n,"ws",(function(){return r})),t.d(n,"init_ws",(function(){return c})),t.d(n,"send_message",(function(){return i})),t.d(n,"close_ws",(function(){return a}));var o,r=null,s=[],c=function e(n){var t=n.token;try{null!==r&&3!==r.readyState||!t||(o=t,r=new WebSocket("".concat("wss://ws-api.yisraelbar.xyz","/?token=").concat(t))),r.onopen=function(){s.forEach((function(e){r.send(JSON.stringify(e))}))},r.onmessage=function(e){if(0!==e.data.size){var n=JSON.parse(e.data);postMessage(n)}},r.onclose=function(){console.log("closing ws connection")},r.onerror=function(n){4e3!==r.code&&setTimeout((function(){e({token:o})}),2e3)}}catch(c){console.log(c)}},i=function(e){try{1!==r.readyState?s.push(e):r.send(JSON.stringify(e))}catch(n){console.log(n)}},a=function(){var e;1===(null===(e=r)||void 0===e?void 0:e.readyState)&&(r.send(JSON.stringify({type:"close-connection"})),r.close(),r=null)};addEventListener("message",(function(e){var t,o=e.data,r=o.type,s=o.method,c=o.id,i=o.params;"RPC"===r&&s&&((t=n[s])?Promise.resolve().then((function(){return t.apply(n,i)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:c,result:e})})).catch((function(e){var n={message:e};e.stack&&(n.message=e.message,n.stack=e.stack,n.name=e.name),postMessage({type:"RPC",id:c,error:n})}))})),postMessage({type:"RPC",method:"ready"})}]);
//# sourceMappingURL=c1146bffbb0862dcee86.worker.js.map